# Checkpoint — 2025-10-25 09:45 PDT — Auth0 secrets via Secrets Manager

## Scope
- Replaced per-environment SSM parameters with Terraform-managed AWS Secrets Manager secrets for `AUTH0_ISSUER` and `AUTH0_AUDIENCE`.
- Introduced `modules/auth0_secrets`, updated dev/staging compositions, and enhanced the App Runner IAM module to support both SSM and Secrets Manager secret sources.
- Refreshed operator docs (deploy notes, state setup, handoff, decision log, TODO) and added a reminder to configure alert subscribers after the broader project wraps.

## Diff Highlights
- `infra/terraform/modules/auth0_secrets/main.tf` — new helper that creates issuer/audience secrets and exposes ARNs/names.
- `infra/terraform/envs/{dev,staging}/main.tf` — swap SSM parameters for the new module, add service name locals, update outputs.
- `infra/terraform/modules/apprunner/main.tf` — dynamic IAM statements now handle Secrets Manager (GetSecretValue + KMS decrypt) while retaining optional SSM support.
- Docs (`docs/agents/{journal,decisions,handoff,todo}.md`, `infra/PLAN.md`, `infra/terraform/STATE_SETUP.md`, `service/DEPLOY_NOTES.md`) updated to describe the migration and post-project alert follow-up.

## Evidence
- `terraform -chdir=infra/terraform/envs/dev init -backend=false`
- `terraform -chdir=infra/terraform/envs/dev validate`
- `terraform -chdir=infra/terraform/envs/staging init -backend=false`
- `terraform -chdir=infra/terraform/envs/staging validate`

## Risks / Follow-ups
- Ensure the GitHub deploy IAM role includes `secretsmanager:*` permissions (per deploy notes) before running Terraform apply.
- Add SNS/email/webhook subscriptions to the monitoring topics after the wider project reaches completion.
- Plan for future secret rotation using Secrets Manager once Auth0 operational processes are defined.
